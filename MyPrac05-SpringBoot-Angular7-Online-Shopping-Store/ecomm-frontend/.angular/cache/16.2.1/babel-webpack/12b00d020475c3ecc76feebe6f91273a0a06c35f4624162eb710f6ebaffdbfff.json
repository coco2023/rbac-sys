{"ast":null,"code":"var _class;\nimport { Role } from 'src/app/enum/Role';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/user.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\nfunction NavigationComponent_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 11)(1, \"a\", 12);\n    i0.ɵɵtext(2, \" Books \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"a\", 13);\n    i0.ɵɵtext(4, \" Food \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"a\", 14);\n    i0.ɵɵtext(6, \" Clothes \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"a\", 15);\n    i0.ɵɵtext(8, \" Drink \");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction NavigationComponent_a_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"a\", 16);\n    i0.ɵɵelement(1, \"i\", 17);\n    i0.ɵɵtext(2, \" Cart \");\n    i0.ɵɵelementEnd();\n  }\n}\nconst _c0 = function () {\n  return {\n    logout: true\n  };\n};\nfunction NavigationComponent_ng_container_10_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"a\", 18);\n    i0.ɵɵelement(2, \"i\", 19);\n    i0.ɵɵtext(3, \" Orders \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"a\", 20);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"a\", 21);\n    i0.ɵɵlistener(\"click\", function NavigationComponent_ng_container_10_Template_a_click_6_listener() {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r5 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r5.logout());\n    });\n    i0.ɵɵtext(7, \" Sign Out \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r2.name, \" \");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"queryParams\", i0.ɵɵpureFunction0(2, _c0));\n  }\n}\nfunction NavigationComponent_ng_template_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"a\", 22);\n    i0.ɵɵtext(1, \" Sign In \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(2, \"a\", 23);\n    i0.ɵɵtext(3, \" Sign Up \");\n    i0.ɵɵelementEnd();\n  }\n}\nclass NavigationComponent {\n  constructor(userService, router) {\n    this.userService = userService;\n    this.router = router;\n    this.root = '/';\n    this.Role = Role;\n  }\n  ngOnInit() {\n    this.name$ = this.userService.name$.subscribe(aName => this.name = aName);\n    this.currentUserSubscription = this.userService.currentUser.subscribe(user => {\n      this.currentUser = user;\n      if (!user || user.role == Role.Customer) {\n        this.root = '/';\n      } else {\n        this.root = '/seller';\n      }\n    });\n  }\n  ngOnDestroy() {\n    if (this.currentUserSubscription) {\n      this.currentUserSubscription.unsubscribe();\n    }\n    // this.name$.unsubscribe();\n  }\n\n  logout() {\n    this.userService.logout();\n    // this.router.navigate(['/login'], {queryParams: {logout: 'true'}} );\n  }\n}\n_class = NavigationComponent;\n_class.ɵfac = function NavigationComponent_Factory(t) {\n  return new (t || _class)(i0.ɵɵdirectiveInject(i1.UserService), i0.ɵɵdirectiveInject(i2.Router));\n};\n_class.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: _class,\n  selectors: [[\"app-navigation\"]],\n  decls: 13,\n  vars: 5,\n  consts: [[1, \"navbar\", \"navbar-expand-lg\", \"navbar-dark\", \"bg-dark\"], [1, \"navbar-brand\", 3, \"routerLink\"], [\"src\", \"/assets/brand.png\", \"width\", \"30\", \"height\", \"30\", \"alt\", \"\", 1, \"d-inline-block\", \"align-top\"], [\"type\", \"button\", \"data-toggle\", \"collapse\", \"data-target\", \"#navbarNav\", \"aria-controls\", \"navbarNav\", \"aria-expanded\", \"false\", \"aria-label\", \"Toggle navigation\", 1, \"navbar-toggler\"], [1, \"navbar-toggler-icon\"], [\"id\", \"navbarNav\", 1, \"collapse\", \"navbar-collapse\"], [\"class\", \"navbar-nav\", 4, \"ngIf\"], [1, \"navbar-nav\", \"ml-auto\"], [\"class\", \"nav-item nav-link \", \"routerLink\", \"/cart\", 4, \"ngIf\"], [4, \"ngIf\", \"ngIfElse\"], [\"noUser\", \"\"], [1, \"navbar-nav\"], [\"routerLink\", \"/category/0\", 1, \"nav-item\", \"nav-link\"], [\"routerLink\", \"/category/1\", 1, \"nav-item\", \"nav-link\"], [\"routerLink\", \"/category/2\", 1, \"nav-item\", \"nav-link\"], [\"routerLink\", \"/category/3\", 1, \"nav-item\", \"nav-link\"], [\"routerLink\", \"/cart\", 1, \"nav-item\", \"nav-link\"], [1, \"fas\", \"fa-shopping-cart\"], [\"routerLink\", \"/order\", 1, \"nav-item\", \"nav-link\"], [1, \"fas\", \"fa-list-ul\"], [\"routerLink\", \"/profile\", 1, \"nav-item\", \"nav-link\"], [\"routerLink\", \"/login\", 1, \"nav-item\", \"nav-link\", 3, \"queryParams\", \"click\"], [\"routerLink\", \"/login\", 1, \"nav-item\", \"nav-link\"], [\"routerLink\", \"/register\", 1, \"nav-item\", \"nav-link\"]],\n  template: function NavigationComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"nav\", 0)(1, \"a\", 1);\n      i0.ɵɵelement(2, \"img\", 2);\n      i0.ɵɵtext(3, \" E-Shop \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(4, \"button\", 3);\n      i0.ɵɵelement(5, \"span\", 4);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(6, \"div\", 5);\n      i0.ɵɵtemplate(7, NavigationComponent_div_7_Template, 9, 0, \"div\", 6);\n      i0.ɵɵelementStart(8, \"div\", 7);\n      i0.ɵɵtemplate(9, NavigationComponent_a_9_Template, 3, 0, \"a\", 8);\n      i0.ɵɵtemplate(10, NavigationComponent_ng_container_10_Template, 8, 3, \"ng-container\", 9);\n      i0.ɵɵtemplate(11, NavigationComponent_ng_template_11_Template, 4, 0, \"ng-template\", null, 10, i0.ɵɵtemplateRefExtractor);\n      i0.ɵɵelementEnd()()();\n    }\n    if (rf & 2) {\n      const _r3 = i0.ɵɵreference(12);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"routerLink\", ctx.root);\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"ngIf\", !ctx.currentUser || ctx.currentUser.role == ctx.Role.Customer);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", !ctx.currentUser || ctx.currentUser.role == ctx.Role.Customer);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.currentUser)(\"ngIfElse\", _r3);\n    }\n  },\n  dependencies: [i3.NgIf, i2.RouterLink],\n  styles: [\"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});\nexport { NavigationComponent };","map":{"version":3,"names":["Role","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵelement","ɵɵelementContainerStart","ɵɵlistener","NavigationComponent_ng_container_10_Template_a_click_6_listener","ɵɵrestoreView","_r6","ctx_r5","ɵɵnextContext","ɵɵresetView","logout","ɵɵelementContainerEnd","ɵɵadvance","ɵɵtextInterpolate1","ctx_r2","name","ɵɵproperty","ɵɵpureFunction0","_c0","NavigationComponent","constructor","userService","router","root","ngOnInit","name$","subscribe","aName","currentUserSubscription","currentUser","user","role","Customer","ngOnDestroy","unsubscribe","ɵɵdirectiveInject","i1","UserService","i2","Router","selectors","decls","vars","consts","template","NavigationComponent_Template","rf","ctx","ɵɵtemplate","NavigationComponent_div_7_Template","NavigationComponent_a_9_Template","NavigationComponent_ng_container_10_Template","NavigationComponent_ng_template_11_Template","ɵɵtemplateRefExtractor","_r3"],"sources":["D:\\1Learn\\2022CVProject\\20230222CogentTrain\\20230613Rbac\\rbac-sys\\MyPrac05-SpringBoot-Angular7-Online-Shopping-Store\\ecomm-frontend\\src\\app\\pages\\navigation\\navigation.component.ts","D:\\1Learn\\2022CVProject\\20230222CogentTrain\\20230613Rbac\\rbac-sys\\MyPrac05-SpringBoot-Angular7-Online-Shopping-Store\\ecomm-frontend\\src\\app\\pages\\navigation\\navigation.component.html"],"sourcesContent":["import { Component, OnDestroy, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { Subscription } from 'rxjs';\nimport { Role } from 'src/app/enum/Role';\nimport { JwtResponse } from 'src/app/response/JwtResponse';\nimport { UserService } from 'src/app/services/user.service';\n\n@Component({\n  selector: 'app-navigation',\n  templateUrl: './navigation.component.html',\n  styleUrls: ['./navigation.component.css']\n})\nexport class NavigationComponent implements OnInit, OnDestroy {\n\n\n  currentUserSubscription: Subscription | undefined;\n  name$: Subscription | undefined;\n  name: string | undefined;\n  currentUser: JwtResponse | undefined;\n  root = '/';\n  Role = Role;\n\n  constructor(private userService: UserService,\n              private router: Router,\n  ) {\n\n  }\n\n\n  ngOnInit() {\n      this.name$ = this.userService.name$.subscribe(aName => this.name = aName);\n      this.currentUserSubscription = this.userService.currentUser.subscribe(user => {\n          this.currentUser = user;\n          if (!user || user.role == Role.Customer) {\n              this.root = '/';\n          } else {\n              this.root = '/seller';\n          }\n      });\n  }\n\n  ngOnDestroy(): void {\n    if (this.currentUserSubscription) {\n      this.currentUserSubscription.unsubscribe();\n  }\n    // this.name$.unsubscribe();\n  }\n\n  logout() {\n      this.userService.logout();\n      // this.router.navigate(['/login'], {queryParams: {logout: 'true'}} );\n  }\n\n}\n","<nav class=\"navbar navbar-expand-lg navbar-dark bg-dark\">\n    <a class=\"navbar-brand\" [routerLink]=\"root\">\n        <img src=\"/assets/brand.png\" width=\"30\" height=\"30\" class=\"d-inline-block align-top\" alt=\"\">\n        E-Shop\n    </a>\n\n    <button class=\"navbar-toggler\" type=\"button\" data-toggle=\"collapse\" data-target=\"#navbarNav\"\n            aria-controls=\"navbarNav\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\n        <span class=\"navbar-toggler-icon\"></span>\n    </button>\n    <div class=\"collapse navbar-collapse\" id=\"navbarNav\">\n\n        <div class=\"navbar-nav\" *ngIf=\"!currentUser || currentUser.role == Role.Customer\">\n\n            <a class=\"nav-item nav-link \"\n               routerLink=\"/category/0\">\n                Books\n            </a>\n            <a class=\"nav-item nav-link\"\n               routerLink=\"/category/1\">\n                Food\n            </a>\n            <a class=\"nav-item nav-link \"\n               routerLink=\"/category/2\">\n                Clothes\n            </a>\n            <a class=\"nav-item nav-link\"\n               routerLink=\"/category/3\">\n                Drink\n            </a>\n\n        </div>\n\n        <div class=\"navbar-nav ml-auto\">\n            <a *ngIf=\"!currentUser || currentUser.role == Role.Customer\"\n                    class=\"nav-item nav-link \" routerLink=\"/cart\">\n                <i class=\"fas fa-shopping-cart\"></i>\n                Cart\n            </a>\n\n            <ng-container *ngIf=\"currentUser; else noUser\">\n                <a class=\"nav-item nav-link \" routerLink=\"/order\">\n                    <i class=\"fas fa-list-ul\"></i>\n                    Orders\n                </a>\n                <a class=\"nav-item nav-link \" routerLink=\"/profile\">\n                    {{name}}\n                </a>\n                <a class=\"nav-item nav-link \" (click)=\"logout()\" routerLink=\"/login\" [queryParams]=\"{logout: true}\">\n                    Sign Out\n                </a>\n            </ng-container>\n            <ng-template #noUser>\n                <a class=\"nav-item nav-link \" routerLink=\"/login\">\n                    Sign In\n                </a>\n                <a class=\"nav-item nav-link \" routerLink=\"/register\">\n                    Sign Up\n                </a>\n            </ng-template>\n        </div>\n    </div>\n</nav>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}